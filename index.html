<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê³ ê°ìƒë‹´ ê´€ë¦¬ ì‹œìŠ¤í…œ v2.1</title>
    
    <!-- PWA ë©”íƒ€ íƒœê·¸ -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#29b6f6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ê³ ê°ìƒë‹´">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- SEO ìµœì í™” -->
    <meta name="description" content="íš¨ìœ¨ì ì¸ ê³ ê°ìƒë‹´ ê´€ë¦¬ì™€ ìŒì„± ì¸ì‹ ì‹œìŠ¤í…œ">
    <meta name="keywords" content="ê³ ê°ìƒë‹´, ìƒë‹´ê´€ë¦¬, ê³ ê°ê´€ë¦¬, ìŒì„±ì¸ì‹">
    
    <!-- ì•± ì•„ì´ì½˜ë“¤ -->
    <link rel="icon" type="image/png" sizes="192x192" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiByeD0iMjQiIGZpbGw9InVybCgjZ3JhZGllbnQwX2xpbmVhcl8xXzEpIi8+CjxwYXRoIGQ9Ik05NiA0OEM3My45MDg2IDQ4IDU2IDY1LjkwODYgNTYgODhWMTA0QzU2IDEyNi4wOTEgNzMuOTA4NiAxNDQgOTYgMTQ0QzExOC4wOTEgMTQ0IDEzNiAxMjYuMDkxIDEzNiAxMDRWODhDMTM2IDY1LjkwODYgMTE4LjA5MSA0OCA5NiA0OFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik04MCA2NEg4OFY3MkM4OCA3Ni40MTgzIDg0LjQxODMgODAgODAgODBINzJDNjcuNTgxNyA4MCA2NCA3Ni40MTgzIDY0IDcyVjY0SDgwWiIgZmlsbD0iIzI5YjZmNiIvPgo8cGF0aCBkPSJNMTEyIDY0SDEyMFY3MkMxMjAgNzYuNDE4MyAxMTYuNDE4IDgwIDExMiA4MEgxMDRDOTkuNTgxNyA4MCA5NiA3Ni40MTgzIDk2IDcyVjY0SDExMloiIGZpbGw9IiMyOWI2ZjYiLz4KPHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiByeD0iMjQiIGZpbGw9InVybCgjZ3JhZGllbnQwX2xpbmVhcl8xXzEpIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9ImdyYWRpZW50MF9saW5lYXJfMV8xIiB4MT0iMCIgeTE9IjAiIHgyPSIxOTIiIHkyPSIxOTIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iIzg3Y2VlYiIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMyOWI2ZjYiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4=">
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiByeD0iMjQiIGZpbGw9InVybCgjZ3JhZGllbnQwX2xpbmVhcl8xXzEpIi8+CjxwYXRoIGQ9Ik05NiA0OEM3My45MDg2IDQ4IDU2IDY1LjkwODYgNTYgODhWMTA0QzU2IDEyNi4wOTEgNzMuOTA4NiAxNDQgOTYgMTQ0QzExOC4wOTEgMTQ0IDEzNiAxMjYuMDkxIDEzNiAxMDRWODhDMTM2IDY1LjkwODYgMTE4LjA5MSA0OCA5NiA0OFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik04MCA2NEg4OFY3MkM4OCA3Ni40MTgzIDg0LjQxODMgODAgODAgODBINzJDNjcuNTgxNyA4MCA2NCA3Ni40MTgzIDY0IDcyVjY0SDgwWiIgZmlsbD0iIzI5YjZmNiIvPgo8cGF0aCBkPSJNMTEyIDY0SDEyMFY3MkMxMjAgNzYuNDE4MyAxMTYuNDE4IDgwIDExMiA4MEgxMDRDOTkuNTgxNyA4MCA5NiA3Ni40MTgzIDk2IDcyVjY0SDExMloiIGZpbGw9IiMyOWI2ZjYiLz4KPHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiByeD0iMjQiIGZpbGw9InVybCgjZ3JhZGllbnQwX2xpbmVhcl8xXzEpIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9ImdyYWRpZW50MF9saW5lYXJfMV8xIiB4MT0iMCIgeTE9IjAiIHgyPSIxOTIiIHkyPSIxOTIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iIzg3Y2VlYiIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMyOWI2ZjYiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4=">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #87ceeb 0%, #4fc3f7 50%, #29b6f6 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(135, 206, 235, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(79, 195, 247, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(41, 182, 246, 0.3) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 
                0 32px 64px rgba(31, 38, 135, 0.37),
                inset 0 1px 0 rgba(255, 255, 255, 0.5);
            overflow: hidden;
            position: relative;
            z-index: 1;
        }

        .header {
            background: linear-gradient(135deg, 
                rgba(135, 206, 235, 0.9) 0%, 
                rgba(79, 195, 247, 0.9) 50%,
                rgba(41, 182, 246, 0.9) 100%);
            backdrop-filter: blur(10px);
            color: white;
            padding: 40px 30px;
            text-align: center;
            position: relative;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="a" x="0" y="0" width="40" height="40" patternUnits="userSpaceOnUse"><circle cx="20" cy="20" r="1.5" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="40" height="40" fill="url(%23a)"/></svg>');
            opacity: 0.3;
        }

        .header h1 {
            font-size: 2.8em;
            font-weight: 700;
            margin-bottom: 12px;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 1;
        }

        .header p {
            font-size: 1.1em;
            font-weight: 300;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .version-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            z-index: 2;
        }

        .nav-tabs {
            display: flex;
            background: rgba(248, 249, 250, 0.8);
            backdrop-filter: blur(10px);
            position: relative;
        }

        .nav-tab {
            flex: 1;
            padding: 24px 20px;
            text-align: center;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            color: #64748b;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .nav-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(135, 206, 235, 0.1) 0%, rgba(41, 182, 246, 0.1) 100%);
            transform: translateY(100%);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .nav-tab:hover::before {
            transform: translateY(0);
        }

        .nav-tab.active {
            background: white;
            color: #29b6f6;
            font-weight: 600;
            box-shadow: 
                0 -4px 16px rgba(41, 182, 246, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
        }

        .nav-tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 3px;
            background: linear-gradient(90deg, #87ceeb, #29b6f6);
            border-radius: 3px 3px 0 0;
        }

        .tab-content {
            display: none;
            padding: 40px;
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
        }

        .tab-content.active {
            display: block;
        }

        .section-title {
            font-size: 1.8em;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 32px;
            position: relative;
            padding-bottom: 12px;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, #87ceeb, #29b6f6);
            border-radius: 3px;
        }

        /* ìŠ¤ë§ˆíŠ¸ ì…ë ¥ íŒ¨ë„ */
        .smart-input-panel {
            background: rgba(135, 206, 235, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(135, 206, 235, 0.3);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 32px;
        }

        .panel-header {
            text-align: center;
            margin-bottom: 24px;
        }

        .panel-header h3 {
            color: #1e293b;
            font-size: 1.4em;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .panel-header p {
            color: #64748b;
            font-size: 14px;
        }

        .smart-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 20px;
        }

        .feature-item {
            text-align: center;
        }

        .feature-btn {
            width: 100%;
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid rgba(135, 206, 235, 0.3);
            border-radius: 12px;
            padding: 16px 12px;
            font-size: 14px;
            font-weight: 600;
            color: #1e293b;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 8px;
        }

        .feature-btn:hover {
            background: rgba(135, 206, 235, 0.1);
            border-color: #87ceeb;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(135, 206, 235, 0.3);
        }

        .feature-btn:active {
            background: linear-gradient(135deg, #87ceeb 0%, #29b6f6 100%);
            color: white;
        }

        .feature-item small {
            color: #64748b;
            font-size: 12px;
            line-height: 1.4;
            display: block;
        }

        .voice-status {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin-top: 16px;
        }

        .status-indicator-large {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #10b981;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }

        .status-text {
            color: #059669;
            font-weight: 600;
            flex: 1;
        }

        .stop-btn {
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 16px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .stop-btn:hover {
            background: #dc2626;
            transform: scale(1.05);
        }

        .analysis-result {
            background: rgba(240, 147, 251, 0.1);
            border: 1px solid rgba(240, 147, 251, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-top: 16px;
        }

        .analysis-result h4 {
            color: #1e293b;
            margin-bottom: 16px;
            font-size: 16px;
        }

        #extractedInfo {
            background: rgba(255, 255, 255, 0.6);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
            font-size: 14px;
            line-height: 1.6;
            color: #374151;
        }

        .apply-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .apply-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);
        }

        .hidden {
            display: none !important;
        }

        /* í¼ ìŠ¤íƒ€ì¼ */
        .form-group {
            margin-bottom: 28px;
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #1e293b;
            font-size: 14px;
            letter-spacing: 0.025em;
        }

        .form-control {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid rgba(148, 163, 184, 0.3);
            border-radius: 16px;
            font-size: 16px;
            font-weight: 400;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .form-control:focus {
            outline: none;
            border-color: #29b6f6;
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 
                0 0 0 4px rgba(41, 182, 246, 0.1),
                0 4px 12px rgba(41, 182, 246, 0.15);
            transform: translateY(-1px);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        .btn {
            background: linear-gradient(135deg, #87ceeb 0%, #29b6f6 100%);
            color: white;
            padding: 18px 32px;
            border: none;
            border-radius: 16px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 
                0 8px 25px rgba(41, 182, 246, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 12px 35px rgba(41, 182, 246, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        /* ê²€ìƒ‰ ë° ê²°ê³¼ */
        .search-container {
            background: rgba(248, 249, 250, 0.8);
            backdrop-filter: blur(10px);
            padding: 28px;
            border-radius: 20px;
            margin-bottom: 32px;
            border: 1px solid rgba(148, 163, 184, 0.2);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
        }

        .consultation-item {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 
                0 4px 16px rgba(0, 0, 0, 0.08),
                inset 0 1px 0 rgba(255, 255, 255, 0.5);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .consultation-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, #87ceeb 0%, #29b6f6 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .consultation-item:hover::before {
            opacity: 1;
        }

        .consultation-item:hover {
            transform: translateY(-4px);
            box-shadow: 
                0 12px 28px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }

        .consultation-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid rgba(148, 163, 184, 0.2);
        }

        .consultation-date {
            background: linear-gradient(135deg, #87ceeb 0%, #29b6f6 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(41, 182, 246, 0.3);
            backdrop-filter: blur(10px);
        }

        .consultation-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 16px;
        }

        .detail-item {
            background: rgba(248, 249, 250, 0.6);
            backdrop-filter: blur(10px);
            padding: 16px;
            border-radius: 12px;
            border: 1px solid rgba(148, 163, 184, 0.1);
            transition: all 0.2s ease;
        }

        .detail-item:hover {
            background: rgba(248, 249, 250, 0.8);
            transform: translateY(-1px);
        }

        .detail-label {
            font-size: 12px;
            color: #64748b;
            font-weight: 600;
            margin-bottom: 6px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .detail-value {
            font-size: 14px;
            color: #1e293b;
            font-weight: 500;
        }

        .no-results {
            text-align: center;
            padding: 60px 20px;
            color: #64748b;
            font-size: 16px;
            font-weight: 400;
        }

        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00bcd4 0%, #0097a7 100%);
            margin-right: 12px;
            box-shadow: 0 0 8px rgba(0, 188, 212, 0.4);
        }

        .app-source {
            color: #64748b;
            font-size: 11px;
            margin-left: 8px;
            background: rgba(135, 206, 235, 0.2);
            padding: 2px 8px;
            border-radius: 12px;
        }

        /* ì¶”ì¶œëœ ì •ë³´ ìŠ¤íƒ€ì¼ */
        .extracted-items {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .extracted-item {
            padding: 8px 12px;
            background: rgba(135, 206, 235, 0.1);
            border-radius: 6px;
            font-size: 13px;
        }

        .extracted-item strong {
            color: #29b6f6;
        }

        /* ì•Œë¦¼ ìŠ¤íƒ€ì¼ */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #87ceeb 0%, #29b6f6 100%);
            color: white;
            padding: 16px 20px;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(41, 182, 246, 0.3);
            z-index: 1000;
            font-weight: 600;
            max-width: 350px;
            word-wrap: break-word;
            font-size: 14px;
            line-height: 1.4;
            animation: slideIn 0.3s ease-out;
            backdrop-filter: blur(10px);
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .form-row {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
            
            .consultation-details {
                grid-template-columns: 1fr;
            }
            
            .container {
                border-radius: 16px;
            }

            .header {
                padding: 30px 20px;
            }

            .header h1 {
                font-size: 2.2em;
            }

            .tab-content {
                padding: 24px;
            }

            .consultation-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }

            .version-badge {
                position: relative;
                top: auto;
                right: auto;
                margin-bottom: 10px;
            }
        }

        /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ë§ */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(148, 163, 184, 0.1);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #87ceeb 0%, #29b6f6 100%);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #4fc3f7 0%, #0277bd 100%);
        }

        /* PWA ì„¤ì¹˜ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .install-app-btn {
            position: fixed;
            bottom: 80px;
            right: 20px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            z-index: 1001;
            box-shadow: 0 4px 16px rgba(16, 185, 129, 0.4);
            backdrop-filter: blur(10px);
            animation: pulse-install 2s infinite;
            transition: all 0.3s ease;
        }

        .install-app-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.6);
        }

        @keyframes pulse-install {
            0%, 100% { 
                transform: scale(1); 
                box-shadow: 0 4px 16px rgba(16, 185, 129, 0.4);
            }
            50% { 
                transform: scale(1.05); 
                box-shadow: 0 6px 20px rgba(16, 185, 129, 0.6);
            }
        }

        /* PWA ì „ìš© ìŠ¤íƒ€ì¼ (ì•±ìœ¼ë¡œ ì‹¤í–‰ì‹œ) */
        @media (display-mode: standalone) {
            body {
                -webkit-user-select: none;
                -webkit-touch-callout: none;
                -webkit-tap-highlight-color: transparent;
            }
            
            .header {
                padding-top: env(safe-area-inset-top, 40px);
            }
            
            .connection-status {
                bottom: env(safe-area-inset-bottom, 20px);
            }
        }

        /* iOS PWA ì§€ì› */
        @supports (-webkit-touch-callout: none) {
            .container {
                min-height: -webkit-fill-available;
            }
        }

        /* ì˜¤í”„ë¼ì¸ ìƒíƒœ ìŠ¤íƒ€ì¼ */
        .offline-indicator {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: #ef4444;
            color: white;
            text-align: center;
            padding: 8px;
            font-size: 12px;
            font-weight: 600;
            z-index: 1002;
            transform: translateY(-100%);
            transition: transform 0.3s ease;
        }

        .offline-indicator.show {
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="version-badge">v2.1</div>
            <h1>ğŸ¢ ê³ ê°ìƒë‹´ ê´€ë¦¬ ì‹œìŠ¤í…œ</h1>
            <p>ìŠ¤ë§ˆíŠ¸í•œ ìƒë‹´ ê´€ë¦¬ì™€ ìŒì„± ì¸ì‹ ì‹œìŠ¤í…œ</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('consultation')">ìƒˆ ìƒë‹´ ë“±ë¡</button>
            <button class="nav-tab" onclick="showTab('search')">ìƒë‹´ ë‚´ì—­ ê²€ìƒ‰</button>
        </div>

        <div id="consultation" class="tab-content active">
            <h2 class="section-title">ìƒˆ ìƒë‹´ ë“±ë¡</h2>
            
            <!-- ìŠ¤ë§ˆíŠ¸ ìƒë‹´ ë„ìš°ë¯¸ -->
            <div class="smart-input-panel">
                <div class="panel-header">
                    <h3>ğŸ¤ ìŠ¤ë§ˆíŠ¸ ìƒë‹´ ë„ìš°ë¯¸</h3>
                    <p>í†µí™” ì—°ë™ ë° ìŒì„± ë¶„ì„ìœ¼ë¡œ ìë™ ì…ë ¥</p>
                </div>
                
                <div class="smart-features">
                    <div class="feature-item">
                        <button id="getCallInfo" class="feature-btn">
                            ğŸ“ í†µí™” ì •ë³´ ê°€ì ¸ì˜¤ê¸°
                        </button>
                        <small>í˜„ì¬ í†µí™” ì¤‘ì¸ ë²ˆí˜¸ë¥¼ ìë™ìœ¼ë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤</small>
                    </div>
                    
                    <div class="feature-item">
                        <button id="startVoiceRecognition" class="feature-btn">
                            ğŸ™ï¸ ìŒì„± ë¶„ì„ ì‹œì‘
                        </button>
                        <small>í†µí™” ë‚´ìš©ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ë¶„ì„í•˜ì—¬ ìë™ ì…ë ¥</small>
                    </div>
                    
                    <div class="feature-item">
                        <button id="analyzeCallHistory" class="feature-btn">
                            ğŸ“‹ ìµœê·¼ í†µí™” ë¶„ì„
                        </button>
                        <small>ìµœê·¼ í†µí™” ê¸°ë¡ì„ ë¶„ì„í•˜ì—¬ ìƒë‹´ ì •ë³´ ì¶”ì¶œ</small>
                    </div>
                </div>
                
                <div id="voiceStatus" class="voice-status hidden">
                    <div class="status-indicator-large"></div>
                    <span class="status-text">ìŒì„± ë¶„ì„ ì¤‘...</span>
                    <button id="stopVoiceRecognition" class="stop-btn">ì¤‘ì§€</button>
                </div>
                
                <div id="analysisResult" class="analysis-result hidden">
                    <h4>ğŸ¤– AI ë¶„ì„ ê²°ê³¼</h4>
                    <div id="extractedInfo"></div>
                    <button id="applyAnalysis" class="apply-btn">ë¶„ì„ ê²°ê³¼ ì ìš©</button>
                </div>
            </div>

            <!-- ìƒë‹´ ì •ë³´ ì…ë ¥ í¼ -->
            <form id="consultationForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="workType">ì‘ì—…ì¢…ë¥˜</label>
                        <select id="workType" class="form-control">
                            <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                            <option value="ì´ì „ì„¤ì¹˜">ì´ì „ì„¤ì¹˜</option>
                            <option value="ì„¤ì¹˜">ì„¤ì¹˜</option>
                            <option value="ì² ê±°">ì² ê±°</option>
                            <option value="ìˆ˜ë¦¬">ìˆ˜ë¦¬</option>
                            <option value="ì ê²€">ì ê²€</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="workMethod">ì‘ì—…ë°©ì‹</label>
                        <select id="workMethod" class="form-control">
                            <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                            <option value="íƒ€ê³µ">íƒ€ê³µ</option>
                            <option value="ë¬´íƒ€ê³µ">ë¬´íƒ€ê³µ</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="wallMaterial">ì„¤ì¹˜í•  ë²½ë©´ì¬ì§ˆ</label>
                    <select id="wallMaterial" class="form-control">
                        <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                        <option value="íƒ€ì¼">íƒ€ì¼</option>
                        <option value="ì½˜í¬ë¦¬íŠ¸">ì½˜í¬ë¦¬íŠ¸</option>
                        <option value="ê°€ë²½">ê°€ë²½</option>
                        <option value="ìƒŒë“œìœ„ì¹˜íŒ¨ë„">ìƒŒë“œìœ„ì¹˜íŒ¨ë„</option>
                        <option value="ì„ê³ ë³´ë“œ">ì„ê³ ë³´ë“œ</option>
                        <option value="ë²½ëŒ">ë²½ëŒ</option>
                        <option value="ê¸°íƒ€">ê¸°íƒ€</option>
                    </select>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="customerPhone">ê³ ê° ì—°ë½ì²˜</label>
                        <input type="tel" id="customerPhone" class="form-control" 
                               placeholder="010-0000-0000 (ì„ íƒì‚¬í•­)">
                    </div>

                    <div class="form-group">
                        <label for="desiredDate">ì‘ì—…í¬ë§ì¼ì</label>
                        <input type="date" id="desiredDate" class="form-control">
                    </div>
                </div>

                <div class="form-group">
                    <label for="consultationDate">ìƒë‹´ì¼ì</label>
                    <input type="datetime-local" id="consultationDate" class="form-control" readonly>
                </div>

                <div class="form-group">
                    <label for="notes">ìƒë‹´ ë©”ëª¨</label>
                    <textarea id="notes" class="form-control" rows="4" 
                              placeholder="ì¶”ê°€ ìƒë‹´ ë‚´ìš©ì´ë‚˜ íŠ¹ì´ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
                </div>

                <button type="submit" class="btn" style="width: 100%;">ìƒë‹´ ë‚´ìš© ì €ì¥</button>
            </form>
        </div>

        <div id="search" class="tab-content">
            <h2 class="section-title">ìƒë‹´ ë‚´ì—­ ê²€ìƒ‰</h2>
            
            <div class="search-container">
                <div class="form-row">
                    <div class="form-group">
                        <label for="searchPhone">ì—°ë½ì²˜ë¡œ ê²€ìƒ‰</label>
                        <input type="tel" id="searchPhone" class="form-control" 
                               placeholder="010-0000-0000">
                    </div>
                    <div class="form-group">
                        <label for="searchDate">ìƒë‹´ì¼ìë¡œ ê²€ìƒ‰</label>
                        <input type="date" id="searchDate" class="form-control">
                    </div>
                </div>
                <button onclick="searchConsultations()" class="btn">ê²€ìƒ‰</button>
                <button onclick="loadAllConsultationsData()" class="btn" style="margin-left: 10px; background: #6c757d;">ì „ì²´ ë³´ê¸°</button>
            </div>

            <div id="searchResults">
                <div class="no-results">
                    ê²€ìƒ‰ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
                </div>
            </div>
        </div>
    </div>

    <!-- ì—°ê²° ìƒíƒœ í‘œì‹œ -->
    <div id="connectionStatus" class="connection-status">
        ğŸ”¥ Firebase ì—°ê²° ì¤‘...
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <script>
        // Firebase ì„¤ì • (dadam-work í”„ë¡œì íŠ¸)
        const firebaseConfig = {
            apiKey: "AIzaSyCSrhEZtE44KT66sTke6g-ZH3732QjFNyA",
            authDomain: "dadam-work.firebaseapp.com",
            projectId: "dadam-work",
            storageBucket: "dadam-work.firebasestorage.app",
            messagingSenderId: "617534061102",
            appId: "1:617534061102:web:b2dec870a45c6a5b20bdbf"
        };

        // Firebase ì´ˆê¸°í™”
        let db;
        try {
            firebase.initializeApp(firebaseConfig);
            db = firebase.firestore();
            console.log("ğŸ”¥ Firebase ì´ˆê¸°í™” ì„±ê³µ - í”„ë¡œì íŠ¸:", firebaseConfig.projectId);
            updateConnectionStatus('connected', 'ğŸ”¥ Firebase ì—°ê²°ë¨');
        } catch (error) {
            console.error("âŒ Firebase ì´ˆê¸°í™” ì‹¤íŒ¨:", error);
            updateConnectionStatus('disconnected', 'âŒ Firebase ì—°ê²° ì‹¤íŒ¨');
        }

        // ì—°ê²° ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateConnectionStatus(status, message) {
            const statusElement = document.getElementById('connectionStatus');
            statusElement.textContent = message;
            statusElement.className = `connection-status ${status === 'connected' ? '' : 'disconnected'}`;
        }

        // í˜„ì¬ ì‹œê°„ì„ ìƒë‹´ì¼ìì— ìë™ ì„¤ì •
        function setCurrentDateTime() {
            const now = new Date();
            const localDateTime = new Date(now.getTime() - now.getTimezoneOffset() * 60000);
            document.getElementById('consultationDate').value = localDateTime.toISOString().slice(0, 16);
        }

        // íƒ­ ì „í™˜ í•¨ìˆ˜
        function showTab(tabName) {
            const tabs = document.querySelectorAll('.nav-tab');
            const contents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            contents.forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
            
            if (tabName === 'search') {
                loadAllConsultations();
            }
        }

        // ìƒë‹´ ë‚´ìš© ì €ì¥ (í•„ìˆ˜ í•­ëª© ì œê±°, ëª¨ë“  í•­ëª© ì„ íƒì‚¬í•­)
        document.getElementById('consultationForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            if (!db) {
                showNotification('âŒ Firebase ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                return;
            }
            
            // ìµœì†Œí•œ ì—°ë½ì²˜ë‚˜ ë©”ëª¨ ì¤‘ í•˜ë‚˜ëŠ” ìˆì–´ì•¼ í•¨
            const customerPhone = document.getElementById('customerPhone').value.trim();
            const notes = document.getElementById('notes').value.trim();
            
            if (!customerPhone && !notes) {
                showNotification('âš ï¸ ì—°ë½ì²˜ë‚˜ ìƒë‹´ ë©”ëª¨ ì¤‘ ìµœì†Œ í•˜ë‚˜ëŠ” ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const consultationData = {
                workType: document.getElementById('workType').value || 'ë¯¸ì„ íƒ',
                workMethod: document.getElementById('workMethod').value || 'ë¯¸ì„ íƒ',
                wallMaterial: document.getElementById('wallMaterial').value || 'ë¯¸ì„ íƒ',
                customerPhone: customerPhone || 'ë¯¸ì…ë ¥',
                desiredDate: document.getElementById('desiredDate').value || '',
                consultationDate: document.getElementById('consultationDate').value,
                notes: notes || '',
                createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                appSource: 'consultation-system',
                version: '2.1'
            };

            try {
                const docRef = await db.collection('customer_consultations').add(consultationData);
                showNotification('âœ… ìƒë‹´ ë‚´ìš©ì´ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
                console.log("ğŸ’¾ ì €ì¥ëœ ë¬¸ì„œ ID:", docRef.id);
                
                // í¼ ì´ˆê¸°í™”
                document.getElementById('consultationForm').reset();
                setCurrentDateTime();
                
            } catch (error) {
                console.error('ğŸ’¥ ì €ì¥ ì˜¤ë¥˜:', error);
                showNotification('âŒ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
            }
        });

        // ì—°ë½ì²˜ë¡œ ìƒë‹´ ë‚´ì—­ ê²€ìƒ‰ (ì¸ë±ìŠ¤ ë¶ˆí•„ìš”í•œ ì•ˆì „í•œ ë°©ì‹)
        async function searchConsultations() {
            if (!db) {
                showNotification('âŒ Firebase ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                return;
            }

            const searchPhone = document.getElementById('searchPhone').value.trim();
            const searchDate = document.getElementById('searchDate').value;
            const resultsContainer = document.getElementById('searchResults');
            
            // ê²€ìƒ‰ ì¡°ê±´ì´ ì—†ìœ¼ë©´ ì•ˆë‚´ ë©”ì‹œì§€
            if (!searchPhone && !searchDate) {
                resultsContainer.innerHTML = '<div class="no-results">ğŸ” ì—°ë½ì²˜ë‚˜ ë‚ ì§œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</div>';
                return;
            }
            
            try {
                let consultations = [];
                
                // ëª¨ë“  ê²½ìš°ì— ì „ì²´ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ í•„í„°ë§
                // ì´ ë°©ë²•ì€ ì¸ë±ìŠ¤ê°€ í•„ìš”ì—†ìŒ
                const querySnapshot = await db.collection('customer_consultations').get();
                
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    let shouldInclude = true;
                    
                    // ì—°ë½ì²˜ í•„í„°ë§
                    if (searchPhone && data.customerPhone !== searchPhone) {
                        shouldInclude = false;
                    }
                    
                    // ë‚ ì§œ í•„í„°ë§
                    if (searchDate && shouldInclude) {
                        const consultationDate = new Date(data.consultationDate).toISOString().split('T')[0];
                        if (consultationDate !== searchDate) {
                            shouldInclude = false;
                        }
                    }
                    
                    if (shouldInclude) {
                        consultations.push({ id: doc.id, ...data });
                    }
                });
                
                // ê²°ê³¼ë¥¼ ìµœì‹ ìˆœìœ¼ë¡œ ì •ë ¬ (createdAt ê¸°ì¤€)
                consultations.sort((a, b) => {
                    const dateA = a.createdAt?.toDate() || new Date(a.consultationDate);
                    const dateB = b.createdAt?.toDate() || new Date(b.consultationDate);
                    return dateB - dateA;
                });
                
                displayConsultations(consultations);
                console.log(`ğŸ” ê²€ìƒ‰ ì™„ë£Œ: ${consultations.length}ê±´`);
                
                if (consultations.length > 0) {
                    showNotification(`âœ… ${consultations.length}ê±´ì˜ ìƒë‹´ ë‚´ì—­ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤.`);
                } else {
                    showNotification('ğŸ“­ ê²€ìƒ‰ ì¡°ê±´ì— ë§ëŠ” ìƒë‹´ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.');
                }
                
            } catch (error) {
                console.error('ğŸ” ê²€ìƒ‰ ì˜¤ë¥˜:', error);
                showNotification('âŒ ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                
                // ì˜¤ë¥˜ ë°œìƒ ì‹œ ë¹ˆ ê²°ê³¼ í‘œì‹œ
                resultsContainer.innerHTML = '<div class="no-results">ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</div>';
            }
        }

        // ì „ì²´ ìƒë‹´ ë‚´ì—­ ë¡œë“œ (ê²€ìƒ‰ íƒ­ ì§„ì… ì‹œì—ëŠ” ë¹ˆ í™”ë©´ í‘œì‹œ)
        async function loadAllConsultations() {
            if (!db) {
                showNotification('âŒ Firebase ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                return;
            }

            const resultsContainer = document.getElementById('searchResults');
            resultsContainer.innerHTML = '<div class="no-results">ğŸ” ì—°ë½ì²˜ë‚˜ ë‚ ì§œë¡œ ê²€ìƒ‰í•´ì£¼ì„¸ìš”.</div>';
        }

        // ì‹¤ì œ ì „ì²´ ë°ì´í„° ë¡œë“œ í•¨ìˆ˜ (ì „ì²´ ë³´ê¸° ë²„íŠ¼ìš©)
        async function loadAllConsultationsData() {
            if (!db) {
                showNotification('âŒ Firebase ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                return;
            }

            try {
                // ì¸ë±ìŠ¤ ë¶ˆí•„ìš”í•œ ë‹¨ìˆœ ì¡°íšŒ
                const querySnapshot = await db.collection('customer_consultations').get();
                
                const consultations = [];
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    consultations.push({ id: doc.id, ...data });
                });
                
                // í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì •ë ¬ (ìµœì‹ ìˆœ)
                consultations.sort((a, b) => {
                    const dateA = a.createdAt?.toDate() || new Date(a.consultationDate);
                    const dateB = b.createdAt?.toDate() || new Date(b.consultationDate);
                    return dateB - dateA;
                });
                
                // ìµœëŒ€ 50ê°œë¡œ ì œí•œ
                const limitedConsultations = consultations.slice(0, 50);
                
                displayConsultations(limitedConsultations);
                console.log(`ğŸ“‹ ë¡œë“œ ì™„ë£Œ: ${limitedConsultations.length}ê±´ (ì „ì²´: ${consultations.length}ê±´)`);
                
                showNotification(`ğŸ“‹ ${limitedConsultations.length}ê±´ì˜ ìƒë‹´ ë‚´ì—­ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.`);
                
            } catch (error) {
                console.error('ğŸ“Š ë¡œë“œ ì˜¤ë¥˜:', error);
                showNotification('âŒ ë°ì´í„° ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
            }
        }

        // ìƒë‹´ ë‚´ì—­ í‘œì‹œ (ì¤„ë°”ê¿ˆ ì²˜ë¦¬ ì¶”ê°€)
        function displayConsultations(consultations) {
            const resultsContainer = document.getElementById('searchResults');
            
            if (consultations.length === 0) {
                resultsContainer.innerHTML = '<div class="no-results">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }
            
            resultsContainer.innerHTML = consultations.map(consultation => {
                const consultationDate = new Date(consultation.consultationDate);
                const desiredDate = consultation.desiredDate ? new Date(consultation.desiredDate) : null;
                
                return `
                    <div class="consultation-item">
                        <div class="consultation-header">
                            <div>
                                <span class="status-indicator"></span>
                                <strong>ì—°ë½ì²˜: ${consultation.customerPhone}</strong>
                                <span class="app-source">[ìƒë‹´ì‹œìŠ¤í…œ v${consultation.version || '1.0'}]</span>
                            </div>
                            <div class="consultation-date">
                                ${consultationDate.toLocaleDateString('ko-KR')} ${consultationDate.toLocaleTimeString('ko-KR', {hour: '2-digit', minute: '2-digit'})}
                            </div>
                        </div>
                        <div class="consultation-details">
                            <div class="detail-item">
                                <div class="detail-label">ì‘ì—…ì¢…ë¥˜</div>
                                <div class="detail-value">${consultation.workType}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">ì‘ì—…ë°©ì‹</div>
                                <div class="detail-value">${consultation.workMethod}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">ë²½ë©´ì¬ì§ˆ</div>
                                <div class="detail-value">${consultation.wallMaterial}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">ì‘ì—…í¬ë§ì¼ì</div>
                                <div class="detail-value">${desiredDate ? desiredDate.toLocaleDateString('ko-KR') : 'ë¯¸ì…ë ¥'}</div>
                            </div>
                            ${consultation.notes ? `
                            <div class="detail-item" style="grid-column: 1 / -1;">
                                <div class="detail-label">ìƒë‹´ ë©”ëª¨</div>
                                <div class="detail-value" style="white-space: pre-wrap; word-wrap: break-word;">${consultation.notes}</div>
                            </div>
                            ` : ''}
                        </div>
                    </div>
                `;
            }).join('');
        }

        // === ìŠ¤ë§ˆíŠ¸ ì…ë ¥ ê¸°ëŠ¥ë“¤ ===
        let recognition;
        let isListening = false;

        // í†µí™” ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        document.getElementById('getCallInfo').addEventListener('click', function() {
            if (navigator.userAgent.includes('Mobile')) {
                simulateCallInfo();
            } else {
                showNotification('ğŸ“± ëª¨ë°”ì¼ í™˜ê²½ì—ì„œë§Œ í†µí™” ì •ë³´ë¥¼ ìë™ìœ¼ë¡œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì‹¤ì œ êµ¬í˜„ì‹œ:\n- Android: TelecomManager API\n- iOS: CallKit framework ì‚¬ìš©');
            }
        });

        function simulateCallInfo() {
            const simulatedNumbers = [
                '010-1234-5678', '010-9876-5432', 
                '010-5555-1234', '010-7777-8888'
            ];
            
            const randomNumber = simulatedNumbers[Math.floor(Math.random() * simulatedNumbers.length)];
            document.getElementById('customerPhone').value = randomNumber;
            showNotification('ğŸ“ í†µí™” ë²ˆí˜¸ê°€ ìë™ìœ¼ë¡œ ì…ë ¥ë˜ì—ˆìŠµë‹ˆë‹¤: ' + randomNumber);
        }

        // ìŒì„± ì¸ì‹ ì‹œì‘
        document.getElementById('startVoiceRecognition').addEventListener('click', function() {
            if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                showNotification('âŒ ì´ ë¸Œë¼ìš°ì €ëŠ” ìŒì„± ì¸ì‹ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\nChrome ë˜ëŠ” Edge ë¸Œë¼ìš°ì €ë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”.');
                return;
            }
            startVoiceRecognition();
        });

        function startVoiceRecognition() {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            recognition = new SpeechRecognition();
            
            recognition.lang = 'ko-KR';
            recognition.continuous = true;
            recognition.interimResults = true;

            document.getElementById('voiceStatus').classList.remove('hidden');
            isListening = true;

            let fullTranscript = '';

            recognition.onresult = function(event) {
                for (let i = event.resultIndex; i < event.results.length; i++) {
                    const transcript = event.results[i][0].transcript;
                    if (event.results[i].isFinal) {
                        fullTranscript += transcript + ' ';
                    }
                }

                if (fullTranscript.length > 50) {
                    analyzeVoiceContent(fullTranscript);
                }
            };

            recognition.onerror = function(event) {
                console.error('ìŒì„± ì¸ì‹ ì˜¤ë¥˜:', event.error);
                showNotification('âŒ ìŒì„± ì¸ì‹ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                stopVoiceRecognition();
            };

            recognition.onend = function() {
                if (isListening) {
                    recognition.start();
                }
            };

            recognition.start();
            showNotification('ğŸ™ï¸ ìŒì„± ì¸ì‹ì„ ì‹œì‘í•©ë‹ˆë‹¤. í†µí™” ë‚´ìš©ì„ ë§í•´ë³´ì„¸ìš”.');
        }

        // ìŒì„± ì¸ì‹ ì¤‘ì§€
        document.getElementById('stopVoiceRecognition').addEventListener('click', stopVoiceRecognition);

        function stopVoiceRecognition() {
            if (recognition) {
                isListening = false;
                recognition.stop();
            }
            document.getElementById('voiceStatus').classList.add('hidden');
            showNotification('ğŸ›‘ ìŒì„± ì¸ì‹ì´ ì¤‘ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // ìŒì„± ë‚´ìš© ë¶„ì„
        function analyzeVoiceContent(transcript) {
            const analysisResult = extractConsultationInfo(transcript);
            if (Object.keys(analysisResult).length > 0) {
                displayAnalysisResult(analysisResult);
            }
        }

        // ìƒë‹´ ì •ë³´ ì¶”ì¶œ
        function extractConsultationInfo(text) {
            const result = {};
            
            // ì‘ì—…ì¢…ë¥˜ ì¶”ì¶œ
            if (text.includes('ì„¤ì¹˜') && !text.includes('ì´ì „')) {
                result.workType = 'ì„¤ì¹˜';
            } else if (text.includes('ì´ì „ì„¤ì¹˜') || text.includes('ì´ì‚¬')) {
                result.workType = 'ì´ì „ì„¤ì¹˜';
            } else if (text.includes('ì² ê±°') || text.includes('ì œê±°')) {
                result.workType = 'ì² ê±°';
            } else if (text.includes('ìˆ˜ë¦¬') || text.includes('ê³ ì¥')) {
                result.workType = 'ìˆ˜ë¦¬';
            }

            // ì‘ì—…ë°©ì‹ ì¶”ì¶œ
            if (text.includes('íƒ€ê³µ') || text.includes('êµ¬ë©')) {
                result.workMethod = 'íƒ€ê³µ';
            } else if (text.includes('ë¬´íƒ€ê³µ') || text.includes('ì ‘ì°©')) {
                result.workMethod = 'ë¬´íƒ€ê³µ';
            }

            // ë²½ë©´ì¬ì§ˆ ì¶”ì¶œ
            if (text.includes('íƒ€ì¼')) {
                result.wallMaterial = 'íƒ€ì¼';
            } else if (text.includes('ì½˜í¬ë¦¬íŠ¸') || text.includes('ì‹œë©˜íŠ¸')) {
                result.wallMaterial = 'ì½˜í¬ë¦¬íŠ¸';
            } else if (text.includes('ê°€ë²½') || text.includes('íŒŒí‹°ì…˜')) {
                result.wallMaterial = 'ê°€ë²½';
            } else if (text.includes('ìƒŒë“œìœ„ì¹˜') || text.includes('íŒ¨ë„')) {
                result.wallMaterial = 'ìƒŒë“œìœ„ì¹˜íŒ¨ë„';
            } else if (text.includes('ì„ê³ ë³´ë“œ')) {
                result.wallMaterial = 'ì„ê³ ë³´ë“œ';
            }

            // ë©”ëª¨ ì¶”ê°€
            if (text.length > 20) {
                result.notes = text.substring(0, 200) + (text.length > 200 ? '...' : '');
            }

            return result;
        }

        // ë¶„ì„ ê²°ê³¼ í‘œì‹œ
        function displayAnalysisResult(result) {
            const resultDiv = document.getElementById('extractedInfo');
            let html = '<div class="extracted-items">';
            
            Object.keys(result).forEach(key => {
                const labels = {
                    workType: 'ì‘ì—…ì¢…ë¥˜',
                    workMethod: 'ì‘ì—…ë°©ì‹', 
                    wallMaterial: 'ë²½ë©´ì¬ì§ˆ',
                    notes: 'ìƒë‹´ë‚´ìš©'
                };
                
                if (labels[key]) {
                    html += `<div class="extracted-item">
                        <strong>${labels[key]}:</strong> ${result[key]}
                    </div>`;
                }
            });
            
            html += '</div>';
            resultDiv.innerHTML = html;
            document.getElementById('analysisResult').classList.remove('hidden');
            window.extractedData = result;
        }

        // ë¶„ì„ ê²°ê³¼ ì ìš©
        document.getElementById('applyAnalysis').addEventListener('click', function() {
            if (window.extractedData) {
                const data = window.extractedData;
                
                if (data.workType) document.getElementById('workType').value = data.workType;
                if (data.workMethod) document.getElementById('workMethod').value = data.workMethod;
                if (data.wallMaterial) document.getElementById('wallMaterial').value = data.wallMaterial;
                if (data.notes) document.getElementById('notes').value = data.notes;
                
                showNotification('âœ… ë¶„ì„ ê²°ê³¼ê°€ í¼ì— ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤!');
                document.getElementById('analysisResult').classList.add('hidden');
            }
        });

        // ìµœê·¼ í†µí™” ë¶„ì„
        document.getElementById('analyzeCallHistory').addEventListener('click', function() {
            const sampleCallContent = `
                ì•ˆë…•í•˜ì„¸ìš”. ì—ì–´ì»¨ ì„¤ì¹˜ ë¬¸ì˜ë“œë¦½ë‹ˆë‹¤. 
                ì•„íŒŒíŠ¸ ê±°ì‹¤ ì½˜í¬ë¦¬íŠ¸ ë²½ì— ì„¤ì¹˜í•˜ê³  ì‹¶ì€ë°ìš”. 
                íƒ€ê³µ ì„¤ì¹˜ë¡œ ë¶€íƒë“œë¦¬ê³  ì‹¶ìŠµë‹ˆë‹¤. 
                ë‹¤ìŒ ì£¼ í™”ìš”ì¼ì— ê°€ëŠ¥í•œì§€ í™•ì¸í•´ì£¼ì„¸ìš”.
            `;
            
            const analysisResult = extractConsultationInfo(sampleCallContent);
            analysisResult.notes = sampleCallContent.trim();
            
            document.getElementById('customerPhone').value = '010-1234-5678';
            displayAnalysisResult(analysisResult);
            showNotification('ğŸ“‹ ìµœê·¼ í†µí™” ë‚´ìš©ì„ ë¶„ì„í–ˆìŠµë‹ˆë‹¤.');
        });

        // ì•Œë¦¼ í‘œì‹œ í•¨ìˆ˜
        function showNotification(message) {
            // ê¸°ì¡´ ì•Œë¦¼ ì œê±°
            const existingNotifications = document.querySelectorAll('.notification');
            existingNotifications.forEach(notification => {
                if (document.body.contains(notification)) {
                    document.body.removeChild(notification);
                }
            });

            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(100%)';
                notification.style.transition = 'all 0.3s ease';
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Firebase ì—°ê²° ìƒíƒœ í™•ì¸
        function checkFirebaseConnection() {
            if (!db) return;
            
            db.enableNetwork().then(() => {
                updateConnectionStatus('connected', 'ğŸ”¥ Firebase ì—°ê²°ë¨');
                console.log("âœ… Firestore ì—°ê²° ì„±ê³µ");
            }).catch((error) => {
                updateConnectionStatus('disconnected', 'âŒ Firebase ì—°ê²° ì‹¤íŒ¨');
                console.error("âŒ Firestore ì—°ê²° ì‹¤íŒ¨:", error);
            });
        }

        // PWA ì„¤ì¹˜ ë²„íŠ¼ ë° ê¸°ëŠ¥
        let deferredPrompt;
        let installButton;

        // PWA ì„¤ì¹˜ ê°€ëŠ¥ ì´ë²¤íŠ¸ ê°ì§€
        window.addEventListener('beforeinstallprompt', (e) => {
            console.log('ğŸš€ PWA ì„¤ì¹˜ ê°€ëŠ¥!');
            e.preventDefault();
            deferredPrompt = e;
            showInstallButton();
        });

        // ì„¤ì¹˜ ë²„íŠ¼ í‘œì‹œ
        function showInstallButton() {
            // ì„¤ì¹˜ ë²„íŠ¼ì´ ì—†ë‹¤ë©´ ìƒì„±
            if (!installButton) {
                installButton = document.createElement('button');
                installButton.innerHTML = 'ğŸ“± ì•±ìœ¼ë¡œ ì„¤ì¹˜';
                installButton.className = 'install-app-btn';
                installButton.onclick = installApp;
                document.body.appendChild(installButton);
            }
        }

        // ì•± ì„¤ì¹˜ í•¨ìˆ˜
        async function installApp() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                
                if (outcome === 'accepted') {
                    showNotification('ğŸ‰ ì•±ì´ ì„±ê³µì ìœ¼ë¡œ ì„¤ì¹˜ë˜ì—ˆìŠµë‹ˆë‹¤!');
                    installButton.style.display = 'none';
                } else {
                    showNotification('ğŸ“± ë‚˜ì¤‘ì— ì„¤ì¹˜í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
                }
                
                deferredPrompt = null;
            }
        }

        // ì•±ì´ ì„¤ì¹˜ëœ í›„ ì´ë²¤íŠ¸
        window.addEventListener('appinstalled', () => {
            console.log('âœ… PWA ì„¤ì¹˜ ì™„ë£Œ');
            showNotification('ğŸ‰ ê³ ê°ìƒë‹´ ì•±ì´ ì„¤ì¹˜ë˜ì—ˆìŠµë‹ˆë‹¤!');
            if (installButton) {
                installButton.style.display = 'none';
            }
        });

        // Service Worker ë“±ë¡
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then((registration) => {
                        console.log('âœ… Service Worker ë“±ë¡ ì„±ê³µ:', registration.scope);
                    })
                    .catch((error) => {
                        console.log('âŒ Service Worker ë“±ë¡ ì‹¤íŒ¨:', error);
                    });
            });
        }

        // ì˜¨ë¼ì¸/ì˜¤í”„ë¼ì¸ ìƒíƒœ ê°ì§€ (PWA ê¸°ëŠ¥)
        function updateOnlineStatus() {
            if (navigator.onLine) {
                updateConnectionStatus('connected', 'ğŸ”¥ ì˜¨ë¼ì¸ ëª¨ë“œ');
            } else {
                updateConnectionStatus('disconnected', 'ğŸ“´ ì˜¤í”„ë¼ì¸ ëª¨ë“œ');
                showNotification('ğŸ“´ ì˜¤í”„ë¼ì¸ ëª¨ë“œì…ë‹ˆë‹¤. ì¼ë¶€ ê¸°ëŠ¥ì´ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
            }
        }

        window.addEventListener('online', updateOnlineStatus);
        window.addEventListener('offline', updateOnlineStatus);

        // í˜ì´ì§€ ë¡œë“œì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            console.log("ğŸš€ ê³ ê°ìƒë‹´ í”„ë¡œê·¸ë¨ v2.1 PWA ì‹œì‘");
            setCurrentDateTime();
            updateOnlineStatus();
            
            // Firebase ì—°ê²° í™•ì¸
            setTimeout(() => {
                checkFirebaseConnection();
            }, 1000);
            
            showNotification('ğŸ‰ ê³ ê°ìƒë‹´ ì‹œìŠ¤í…œ PWA v2.1ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤!');
            
            // iOS Safari ì•ˆë‚´ ë©”ì‹œì§€
            if (navigator.userAgent.includes('iPhone') || navigator.userAgent.includes('iPad')) {
                setTimeout(() => {
                    showNotification('ğŸ“± iOS: Safariì—ì„œ ê³µìœ  â†’ í™ˆ í™”ë©´ì— ì¶”ê°€ë¡œ ì•±ì²˜ëŸ¼ ì‚¬ìš©í•˜ì„¸ìš”!');
                }, 3000);
            }
        });

        // ì˜¤ë¥˜ ì²˜ë¦¬
        window.addEventListener('error', function(event) {
            console.error('ì „ì—­ ì˜¤ë¥˜:', event.error);
            showNotification('âŒ ì‹œìŠ¤í…œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + event.error.message);
        });

        // ì˜¤í”„ë¼ì¸/ì˜¨ë¼ì¸ ìƒíƒœ ê°ì§€
        window.addEventListener('online', function() {
            updateConnectionStatus('connected', 'ğŸ”¥ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ë¨');
            checkFirebaseConnection();
        });

        window.addEventListener('offline', function() {
            updateConnectionStatus('disconnected', 'âŒ ë„¤íŠ¸ì›Œí¬ ì—°ê²° ëŠê¹€');
        });
    </script>
</body>
</html>
